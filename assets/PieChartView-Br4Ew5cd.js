import{b as a,c as i,g as e,F as _,m as g,t as v,e as f,q as U,l as F,v as C,f as X,h as Y,r as p,j as M,s as D}from"./index-B7UWckus.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"pie-chart-container"},R={class:"content-wrapper"},q={class:"left-column"},T={class:"sectors-list"},W={class:"sector-left"},G={class:"sector-name"},J={class:"sector-percentage"},K={class:"sector-right"},O=["onClick"],Q=["onClick"],ee={class:"right-column"},te={class:"chart-wrapper"},se={class:"pie-chart",viewBox:"0 0 500 500"},le=["d","fill"],oe={class:"sector-names"},ne={class:"add-sector-modal"},ae={class:"modal-header"},ie={class:"modal-title"},ce={class:"modal-form"},re={class:"form-field"},de={class:"form-field"},ue={class:"value-input-container"},ve={class:"form-field"},pe={class:"color-picker-container"},me={class:"color-palette"},he=["onClick"],_e={class:"color-input-row"},ge={class:"color-picker-wrapper"},Fe=["disabled"],Ce={__name:"PieChartView",setup(fe){const n=p([{id:1,name:"Сектор-1",percentage:20,color:"#FF6384"},{id:2,name:"Сектор-2",percentage:20,color:"#36A2EB"},{id:3,name:"Сектор-3",percentage:20,color:"#FFCE56"}]),m=p(!1),d=p("add"),h=p(null),l=D({id:null,name:"",percentage:"",color:"#FF6384"}),w=p(["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#FF6384","#C9CBCF","#4BC0C0","#9966FF","#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16","#F97316","#6366F1"]),b=M(()=>l.name.trim()!==""&&l.percentage>=1&&l.percentage<=100),y=M(()=>{const o=n.value.reduce((t,c)=>t+c.percentage,0);let s=0;return n.value.map(t=>{const c=t.percentage/o*360,r=s,u=s+c;return s=u,{...t,startAngle:r,endAngle:u,angle:c}})}),B=o=>{const r=(o.startAngle-90)*Math.PI/180,u=(o.endAngle-90)*Math.PI/180,H=250+200*Math.cos(r),I=250+200*Math.sin(r),P=250+200*Math.cos(u),Z=250+200*Math.sin(u),N=o.angle>180?1:0;return["M 250 250",`L ${H} ${I}`,`A 200 200 0 ${N} 1 ${P} ${Z}`,"Z"].join(" ")},V=()=>{d.value="add",x(),m.value=!0},L=o=>{d.value="edit",h.value=o.id,l.id=o.id,l.name=o.name,l.percentage=o.percentage,l.color=o.color,m.value=!0},A=()=>{b.value&&(d.value==="add"?$():S(),k())},$=()=>{const o=n.value.length>0?Math.max(...n.value.map(s=>s.id))+1:1;n.value.push({id:o,name:l.name||`Сектор-${o}`,percentage:Number(l.percentage),color:l.color})},S=()=>{const o=n.value.findIndex(s=>s.id===h.value);o!==-1&&(n.value[o]={id:h.value,name:l.name,percentage:Number(l.percentage),color:l.color})},k=()=>{m.value=!1,h.value=null,x()},x=()=>{l.id=null,l.name="",l.percentage="",l.color="#FF6384"},E=o=>{n.value=n.value.filter(s=>s.id!==o)};return(o,s)=>(a(),i("div",z,[s[9]||(s[9]=e("header",{class:"header"},[e("h1",{class:"title"},"Круговая диаграмма")],-1)),e("div",R,[e("div",q,[e("div",T,[(a(!0),i(_,null,g(n.value,(t,c)=>(a(),i("div",{key:t.id,class:"sector-row"},[e("div",W,[e("span",G,v(t.name),1),s[4]||(s[4]=e("div",{class:"vertical-divider"},null,-1)),e("span",J,v(t.percentage)+"%",1),s[5]||(s[5]=e("div",{class:"vertical-divider"},null,-1)),e("div",{class:"color-circle",style:f({backgroundColor:t.color})},null,4)]),e("div",K,[e("button",{onClick:r=>L(t),class:"icon-btn edit-btn",title:"Редактировать"},[...s[6]||(s[6]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M14.06 9.02L14.98 9.94L5.92 19H5V18.08L14.06 9.02ZM17.66 3C17.41 3 17.15 3.1 16.96 3.29L15.13 5.12L18.88 8.87L20.71 7.04C21.1 6.65 21.1 6.02 20.71 5.63L18.37 3.29C18.17 3.09 17.92 3 17.66 3ZM14.06 6.19L3 17.25V21H6.75L17.81 9.94L14.06 6.19Z",fill:"#666"})],-1)])],8,O),e("button",{onClick:r=>E(t.id),class:"icon-btn delete-btn",title:"Удалить"},[...s[7]||(s[7]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M6 19C6 20.1 6.9 21 8 21H16C17.1 21 18 20.1 18 19V7H6V19ZM19 4H15.5L14.5 3H9.5L8.5 4H5V6H19V4Z",fill:"#666"})],-1)])],8,Q)])]))),128))]),e("button",{onClick:V,class:"add-sector-btn"},[...s[8]||(s[8]=[e("span",{class:"btn-text"},"Добавить сектор",-1)])])]),e("div",ee,[e("div",te,[(a(),i("svg",se,[(a(!0),i(_,null,g(y.value,(t,c)=>(a(),i("g",{key:"slice-"+t.id},[e("path",{d:B(t),fill:t.color,stroke:"#FFFFFF","stroke-width":"2",class:"sector-path"},null,8,le)]))),128))]))]),e("div",oe,[(a(!0),i(_,null,g(n.value,t=>(a(),i("div",{key:"label-"+t.id,class:"sector-label"},v(t.name),1))),128))])])]),m.value?(a(),i("div",{key:0,class:"modal-overlay",onClick:U(k,["self"])},[e("div",ne,[e("div",ae,[e("h2",ie,v(d.value==="add"?"Добавление сектора":"Редактирование сектора"),1)]),e("div",ce,[e("div",re,[F(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>l.name=t),type:"text",class:"name-input",placeholder:"Наименование"},null,512),[[C,l.name]])]),e("div",de,[e("div",ue,[F(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>l.percentage=t),type:"number",class:"value-input",min:"1",max:"100",placeholder:"Значение"},null,512),[[C,l.percentage,void 0,{number:!0}]])])]),e("div",ve,[e("div",pe,[e("div",me,[(a(!0),i(_,null,g(w.value,t=>(a(),i("div",{key:t,class:X(["color-option",{active:l.color===t}]),style:f({backgroundColor:t}),onClick:c=>l.color=t},null,14,he))),128))]),e("div",_e,[F(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>l.color=t),type:"text",class:"hex-input",placeholder:"Цвет"},null,512),[[C,l.color]]),e("div",ge,[e("div",{class:"selected-color-preview",style:f({backgroundColor:l.color})},null,4),F(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>l.color=t),type:"color",class:"native-color-input",title:"Выберите цвет"},null,512),[[C,l.color]])])])])]),e("button",{onClick:A,class:"modal-add-btn",disabled:!b.value},v(d.value==="add"?"Добавить сектор":"Редактировать сектор"),9,Fe)])])])):Y("",!0)]))}},xe=j(Ce,[["__scopeId","data-v-acaf1cc3"]]);export{xe as default};
